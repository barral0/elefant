server {
    listen       8095;
    server_name  _;
    root         /usr/share/nginx/html;
    index        index.html;

    # MIME types
    include      /etc/nginx/mime.types;
    default_type application/octet-stream;

    # Gzip compression
    gzip            on;
    gzip_vary       on;
    gzip_proxied    any;
    gzip_comp_level 6;
    gzip_types      text/plain text/css application/javascript application/json
                    image/svg+xml image/x-icon;
    gzip_min_length 256;

    # SPA routing â€” serve index.html for any unmatched path
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Cache JS/CSS for 1 day (versioning is done by the browser via query strings if needed)
    location ~* \.(css|js)$ {
        expires        1d;
        add_header     Cache-Control "public, max-age=86400, immutable";
    }

    # Security headers
    add_header X-Frame-Options        "SAMEORIGIN"            always;
    add_header X-Content-Type-Options "nosniff"               always;
    add_header Referrer-Policy        "strict-origin"         always;
    add_header X-XSS-Protection       "1; mode=block"         always;
    add_header Permissions-Policy     "geolocation=(), camera=()" always;
    add_header Content-Security-Policy "default-src 'self'; script-src 'self' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: blob: https:; connect-src 'self';" always;

    # Hide nginx version
    server_tokens off;
}
